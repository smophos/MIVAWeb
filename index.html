<meta charset="utf-8">
<html>
<head>
</head>
<style type="text/css">

body{
	font-family: "Helvetica", Sans-Serif; 
}
.hover1:hover{
	fill: #B6BCD2;
	stroke: white;
	cursor: pointer;

}

.hover2:hover{
	fill: #A19CA1;
	stroke: white;
	cursor: pointer;
}
.MedsTabs:hover{
	opacity: 0.7;
	stroke: white;
	cursor: pointer;
}

.MedsTabsdata:hover{
	opacity: 0.7;
	cursor: pointer;
}
.path { 
    stroke: steelblue;
    stroke-width: 2;
    fill: none;
}

.axis path,
.axis line {
    fill: none;
    stroke: grey;
    stroke-width: 1;
    shape-rendering: crispEdges;
}

.closebuttons {
	cursor: pointer;

}
.addnewpatient {
	width: 75%;
	height: 7%;
	background-color: #b4b1b1;
	border-radius: 6px;
	display: inline-block;
	padding: 12px;
	margin-top: 5px;
	margin-bottom: 0px;

}
.submitbutton{
	width: 22%;
	height:7%;
	background-color: #82ad6a;
	padding: 10px;
	border-radius: 6px;
	color: white;
	margin-left: 2%;
	cursor:pointer;
	border: 1px solid #ccc;
	display: inline-block;

}
.addnewnote {
	width: 75%;
	height: 5%;
	background-color: #b4b1b1;
	border-radius: 6px;
	padding: 8px;
	margin-top: 5px;
	margin-left: 1%;

}
.submitbuttonnote{
	width: 20%;
	height:5%;
	background-color: #B85B3D;
	padding: 8px;
	border-radius: 6px;
	color: white;
	cursor:pointer;
	border: 1px solid #ccc;
	display: inline-block;
	font-size: 11px;

}
.submitbutton:hover{
	opacity: 0.7;
	border: 2px solid #edf1eb;

}
.submitbuttonnote:hover{
	opacity: 0.7;
	

}
.notes{
	visibility: hidden;
	position: absolute;
	top: 340px;
	width: 90%;
	
}

.circle {
  fill-opacity: 0.2;
  transition: fill-opacity 250ms linear;
}

circle.active {
  stroke: #f00;
}

.area {
        fill: #307C6B;
        clip-path: url(#clip);
       	border-style: solid;
    	border-color: green;
}
.current{
	border-style: dotted;
    border-width: thick;
     border-color: green;
}
    .zoom {
        cursor: move;
        fill: none;
        pointer-events: all;
    }

.axis {
  shape-rendering: crispEdges;
}

.axis path, .axis line {
  fill: none;
  stroke-width: .5px;
}

.x.axis path {
  stroke: #000;
}

.x.axis line {
  stroke: #4F867F;
  stroke-opacity: .5;
}

.y.axis line {
  stroke: #ddd;
}
.axis text {
   fill: #4F867F;
   font-size: 12px;
   font-weight: bold;
}
/*path.line {
  fill: #4F867F;
  stroke: #4F867F;
  stroke-width: .5px;
}
*/

rect.pane {
  cursor: move;
  fill: #8E3324;
  pointer-events: all;
}


.line {
  fill: none;
  stroke: #4F867F;
  stroke-width: 3px;
}
.grid .tick {
    stroke: lightgrey;
    opacity: 0.3;
}
.grid path {
      stroke-width: 0;
}
.tooltip {
  position: absolute;
  text-align: left;
  width: 100px;
  height: 12px;
  padding: 8px;
  margin-top: -20px;
  font: 65px sans-serif;
  color: #EA7A1E;
  font-weight: bold;
  background: none;
  opacity: 0.7;
  pointer-events: none;
}

</style>

<body bgcolor = "#4A4B4B">


<form name="myform" onSubmit="return addnew()" id ="addnotes" class ="notes">
	<input type ="text" id = "newnote" placeholder = "Add your note&hellip;"class ="addnewnote">
	<input type = "submit" value = "Add new note" name = "Submit" class ="submitbuttonnote">
</form>

	<script type="text/javascript" src="http://dc-js.github.io/dc.js/js/d3.js"></script>
    <script type="text/javascript" src="http://dc-js.github.io/dc.js/js/crossfilter.js"></script>
    <script type="text/javascript" src="http://dc-js.github.io/dc.js/js/dc.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
 	<script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
   
<!--	<script type="text/javascript" src="d3.min.js"></script> -->
	<script type="text/javascript">
var w = window,
	d = document,
	e = d.documentElement,
	g = d.getElementsByTagName('body')[0],
	x = w.innerWidth || e.clientWidth || g.clientWidth ,
	y = w.innerHeight|| e.clientHeight|| g.clientHeight ;

var width = x - 30;
var height = y - 20;  
var noteson =0;  

var dataset = [];
function addnew(event){
	console.log(document.getElementById("newpatient").value)
	dataset.push(document.getElementById("newpatient").value)
	return false;
}

console.log(width);
console.log(height);    


 

 d3.csv("patientnames.csv", function(d){
	length = d3.selectAll(d).size();
	console.log(length);

function addnew(event){
	console.log(document.getElementById("newpatient").value)
	d.push(document.getElementById("newpatient").value)
	return false;
}

var svg = d3.select("body").append("svg").attr("width",width).attr("height", height/16).attr("id","base1").attr("y",0);
			
var rect = d3.select("#base1").selectAll("rect").data(d).enter().append("rect")
			.attr("width", function(d,i){return width/length;})
			.attr("height",height/16)
			.attr("x",function(d,i){return i* width/length;})
			.attr("y",10)
			.attr("fill","#A0A9C9")
			.attr("rx",14)
			.attr("ry",14)
			.attr("stroke","grey")
			.attr("class", "hover1")
			.on("click", function(d,i){d3.select("svg").append("text").attr("font-size", width/50).attr("y", y/8)
										.attr("x", i* width/6).text(function(){return d.names1;})});	

var names = d3.select("#base1").selectAll("text").data(d).enter().append("text")
			.attr("font-size", width/75)
			.attr("fill", "#3e3d3d")
			.text(function (d){return d.name;})
			.attr("y", height/20)
			.attr("class", "MedsTabsdata")
			.attr("x", function(d,i){return i*width/6 + width/24;});

var closebutton1 = d3.select("#base1").append("text").attr("x",width -80).attr("y",35).text("Close").attr("font-size",width/70).attr("fill","#d0d0d0")
					.on("click", function(d,i){d3.select("#base1").remove();}).attr("class","closebuttons");

var svg = d3.select("body").append("svg").attr("width",width).attr("height", height/16).attr("id","base2");
			
var rect = d3.select("#base2").selectAll("rect").data(d).enter().append("rect")
			.attr("width", function(d,i){return width/length;})
			.attr("height",height/16)
			.attr("x",function(d,i){return i* width/length;})
			.attr("y",10)
			.attr("fill","#8F898F")
			.attr("rx",14)
			.attr("ry",14)
			.attr("stroke","grey")
			.attr("class", "hover2")
			.on("click", function(d,i){d3.select("svg").append("text").attr("font-size", width/50).attr("y", y/8)
										.attr("x", i* width/6).text(function(){return d.names1;})});	

var names = d3.select("#base2").selectAll("text").data(d).enter().append("text")
			.attr("font-size", width/75)
			.attr("fill", "#3e3d3d")
			.text(function (d) { return d.name2 ; })
			.attr("y", height/20)
			.attr("class", "MedsTabsdata")
			.attr("x", function(d,i){return i*width/6 + width/24;});

var closebutton2 = d3.select("#base2").append("text").attr("x",width-80).attr("y",35).text("Close").attr("font-size",width/70).attr("fill","#d0d0d0")
					.on("click", function(d,i){d3.select("#base2").remove();}).attr("class","closebuttons");

var svg = d3.select("body").append("svg").attr("width",width).attr("height", height/5.5).attr("id","StaticInfo");
			d3.select("#StaticInfo").append("rect")
			.attr("x",5).attr("y",10)
			.attr("width", width-10)
			.attr("height", height/5.5 -15)
			.attr("stroke","white" )
			.attr("fill","#3e3d3d");

var svg = d3.select("body").append("svg").attr("width",width).attr("height", height/16).attr("id","MedsTabs");

var svg = d3.select("body").append("svg").attr("width",width).attr("height", height/4.8).attr("id","StaticInfoMeds");
		d3.select("#StaticInfoMeds").append("rect")
			.attr("x",5).attr("y",10)
			.attr("width", width-10)
			.attr("height", height/5.5 -15)
			.attr("stroke","#a7a7a7" )
			.attr("fill","#565555")
			.attr("stroke-width",3)
			.attr("id","frontrect");


var medsdata = [{value: 'Meds', color: '#82A29E'},{value: 'Labs', color:'#717E91'},{value:'Imaging', color:'#A49183'},{value:'Actions', color:'#82A29E'},{value:'Notes', color:'#796782'}];

var recttabs = d3.select("#MedsTabs").selectAll("rect").data(medsdata).enter().append("rect")
			.attr("width", function(d,i){return width/5;})
			.attr("height",height/16)
			.attr("x",function(d,i){return i* width/5;})
			.attr("y",10)
			.attr("fill",function(d){return d.color;})
			.attr("rx",14)
			.attr("ry",14)
			.attr("stroke","grey")
			.attr("class", "MedsTabs")
			.on("click", function(d){if (d.value == 'Notes'){if (noteson == '0'){; 
				noteson = 1; 
				

d3.select("#StaticInfoMeds").append("rect")
					.attr("x",5).attr("y",10)
					.attr("width", width-10)
					.attr("height", height/5.5 -15)
					.attr("stroke","#a7a7a7" )
					.attr("fill","#300e03")
					.attr("stroke-width",3)
					.attr("id","notesrect");
		//		document.getElementById("addnotes").style.visibility = "visible";
				
				}
			else {d3.select("#notesrect").remove(); 
			document.getElementById("addnotes").style.visibility="hidden";
			noteson = 0;

			}
			}});
		
		d3.select("#MedsTabs").selectAll("text").data(medsdata).enter()
			.append("text")
			.attr("x",function(d,i){return i*width/5 + 80 ;})
			.attr("y",30)
			.text(function (d) { return d.value ; })
			.attr("font-size",width/70)
			.attr("fill","#282828")
			.attr("class", "MedsTabsdata");

var data2current = [{h:40, value: 12, unit:"PAP"},{h:40, value: 12, unit:"PAP"},{h:40, value: 12, unit:"PAP"},{h:40, value: 12, unit:"PAP"}];

var currentcircles = d3.select("#currentPAP").selectAll("circle").data(data2current).enter().append("circle")
					.attr("cx", function(d,i){return width/1.1;})
					.attr("cy", function(d,i){return height/d.h ;})
					.attr("r", width/50)
					.attr("stroke", "#4F867F")
					.attr("stroke-width",2)
					.attr("fill","#282828")

var medsboxes = d3.select("#currentPAP").selectAll("rect").data(data2current).enter().append("rect")
					.attr("width", function(d,i){return width/12;})
					.attr("height",height/19)
					.attr("x", function(d,i){return width/1.22;})
					.attr("y", function(d,i){return height/d.h - 16;})
					.attr("rx",width/50)
					.attr("ry",10)
					.attr("stroke", "#4F867F")
					.attr("stroke-width",2)
					.attr("fill","#282828")
					.on("click", function(d,i){d3.select("svg").append("text").attr("font-size", width/50).attr("y", y/8)
												.attr("x", i* width/6).text(function(){return d;})});	


var inter = setInterval(function() {
                updateData();
        }, 5000); 
 function updateData(){
 	
			var newNumber = getRandomInt(20, 40);
			d3.select("#currentPAP").selectAll("text").remove();
			d3.select("svg").append("text").text(newNumber).attr("fill","black").attr("font-size",20).attr("x",10).attr("y",(i+1)*20);
		//	console.log(newNumber*100);
d3.select("#currentPAP").append("text")
					.text(newNumber*100)
					.attr("font-size", width/70)
					.attr("x", width/1.18)
					.attr("fill","white")
					.attr("y",20);
				//	.attr("y",function(d){ return height/d.h +10 ;});

}


d3.select("body").append("svg").attr("id","firstgraph").attr("width",width/1.2).attr("height",1100);

var nfirst = 60,
    randomfirst = d3.randomNormal(0, .45),
    datafirst = d3.range(nfirst).map(randomfirst);


var svgfirstline = d3.select("#firstgraph"),
    margin1 = {top: 10, right: 20, bottom: 890, left: 40},
    widthfirstline = +svgfirstline.attr("width") - margin1.left - margin1.right,
    heightfirstline = +svgfirstline.attr("height") - margin1.top - margin1.bottom,
    firstg = svgfirstline.append("g").attr("transform", "translate(" + margin1.left + "," + margin1.top + ")");

var xfirst = d3.scaleLinear()
    .domain([0, nfirst - 1])
    .range([0, widthfirstline]);

var yfirst = d3.scaleLinear()
    .domain([0, 1])
    .range([heightfirstline, 0]);

var firstline = d3.line()
    .x(function(d, i) { return xfirst(i); })
    .y(function(d, i) { return yfirst(d); });

firstg.append("rect")
	.attr("width",widthfirstline)
	.attr("height",30)
	.attr("x",0)
	.attr("y",0)
	.attr("fill","#661616")
	.attr("opacity",0.4);

firstg.append("rect")
	.attr("width",widthfirstline)
	.attr("height",heightfirstline -30)
	.attr("x",0)
	.attr("y",30)
	.attr("fill","#1E4B31")
	.attr("opacity",0.4).on("mouseover", mouseover)
    .on("mousemove", mousemove)
    .on("mouseout", mouseout);

var div = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("display", "none");

function mouseover() {
  div.style("display", "inline");
  d3.selectAll("#tooltipline").remove();
    d3.selectAll("#toolcircle").remove();
}

function mousemove() {
  div
      .text(d3.event.pageY)
      .style("left", (d3.event.pageX - 34) + "px")
      .style("top", (d3.event.pageY - 12) + "px");
       d3.selectAll("#tooltipline").remove();
       d3.selectAll("#toolcircle").remove();

d3.select("#firstgraph").append("line").attr("x1",function(){return d3.event.pageX -34;})
   											.attr("x2",function(){return d3.event.pageX - 34;})
   											.attr("y1",10)
   											.attr("y2", 885)
   											.attr("stroke","#EA7A1E")
   											.attr("stroke-width",3)
   											.attr("id","tooltipline");

d3.select("#firstgraph").append("circle").attr("cx",function(){return d3.event.pageX -34;})
											.attr("cy",5)
											.attr("r",5)
											.attr("fill","#EA7A1E")
											.attr("id","toolcircle");
   
}

function mouseout() {
  div.style("display", "none");
  d3.selectAll("#tooltipline").remove();
  d3.selectAll("#toolcircle").remove();
}

;


firstg.append("defs").append("clipPath")
    .attr("id", "clip")
  	.append("rect")
  	.attr("width", widthfirstline)
    .attr("height", heightfirstline);
   

firstg.append("g")
    .attr("class", "axis axis--x")
    .attr("fill","black")
   	.attr("transform", "translate(0," + yfirst(0) + ")")
    .call(d3.axisBottom(xfirst).ticks(20)
        .tickSize(-heightfirstline, 0, 0)
            .tickFormat(""));
  

firstg.append("g")
    .attr("class", "axis axis--y")
    .call(d3.axisLeft(yfirst) .tickSize(-widthfirstline, 0, 0)
           );

firstg.append("line")
	.style("stroke-dasharray", ("10,3")) // make the stroke dashed
    .style("stroke", "red") 
    .attr("x1",0)
    .attr("x2",widthfirstline)
    .attr("y1",30)
    .attr("y2",30);  

var path = firstg.append("g")
  .attr("clip-path", "url(#clip)")
  .append("path")
  .datum(datafirst)
  .attr("class", "line")
  .transition()
  .duration(2000)
  .ease(d3.easeLinear)
  .on("start", tickfirst);



function tickfirst() {

  // Push a new data point onto the back.
  generateddata = datafirst.push(randomfirst());
  console.log(generateddata);
  // Redraw the line.
  d3.select(this)
      .attr("d", firstline)
      .attr("transform", null);

  // Slide it to the left.
   d3.active(this)
    .attr("transform", "translate(" + xfirst(-1) + ",0)")
    .transition()
    .on("start", tickfirst);

  // Pop the old data point off the front.
  datafirst.shift();

}



var nsecond = 60,
    randomsecond = d3.randomNormal(0, .45),
    datasecond = d3.range(nsecond).map(randomsecond);


var svgsecondline = d3.select("#firstgraph"),
    margin2 = {top: 230, right: 20, bottom: 670, left: 40},
    widthsecondline = +svgsecondline.attr("width") - margin2.left - margin2.right,
    heightsecondline = +svgsecondline.attr("height") - margin2.top - margin2.bottom,
    secondg = svgsecondline.append("g").attr("transform", "translate(" + margin2.left + "," + margin2.top + ")");

var xsecond = d3.scaleLinear()
    .domain([0, nsecond - 1])
    .range([0, widthsecondline]);

var ysecond = d3.scaleLinear()
    .domain([0, 1])
    .range([heightsecondline, 0]);

var secondline = d3.line()
    .x(function(d, i) { return xsecond(i); })
    .y(function(d, i) { return ysecond(d); });

secondg.append("rect")
	.attr("width",widthsecondline)
	.attr("height",30)
	.attr("x",0)
	.attr("y",0)
	.attr("fill","#661616")
	.attr("opacity",0.4);

secondg.append("rect")
	.attr("width",widthsecondline)
	.attr("height",heightsecondline -30)
	.attr("x",0)
	.attr("y",30)
	.attr("fill","#1E4B31")
	.attr("opacity",0.4).on("mouseover", mouseover)
    .on("mousemove", mousemove)
    .on("mouseout", mouseout);

var div = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("display", "none");

function mouseover() {
  div.style("display", "inline");
  d3.selectAll("#tooltipline").remove();
    d3.selectAll("#toolcircle").remove();
}

function mousemove() {
  div
      .text(d3.event.pageY)
      .style("left", (d3.event.pageX - 34) + "px")
      .style("top", (d3.event.pageY - 12) + "px");
       d3.selectAll("#tooltipline").remove();
       d3.selectAll("#toolcircle").remove();

d3.select("#firstgraph").append("line").attr("x1",function(){return d3.event.pageX -34;})
   											.attr("x2",function(){return d3.event.pageX - 34;})
   											.attr("y1",10)
   											.attr("y2", 885)
   											.attr("stroke","#EA7A1E")
   											.attr("stroke-width",3)
   											.attr("id","tooltipline");

d3.select("#firstgraph").append("circle").attr("cx",function(){return d3.event.pageX -34;})
											.attr("cy",5)
											.attr("r",5)
											.attr("fill","#EA7A1E")
											.attr("id","toolcircle");

d3.select("#firstgraph").append("circle").attr("cx",function(){return d3.event.pageX -34;})
											.attr("cy",890)
											.attr("r",5)
											.attr("fill","#EA7A1E")
											.attr("id","toolcirclebelow");

   
}

function mouseout() {
  div.style("display", "none");
  d3.selectAll("#tooltipline").remove();
  d3.selectAll("#toolcircle").remove();
}


secondg.append("defs").append("clipPath")
    .attr("id", "clip")
  	.append("rect")
  	.attr("width", widthsecondline)
    .attr("height", heightsecondline);
   

secondg.append("g")
    .attr("class", "axis axis--x")
    .attr("fill","black")
   	.attr("transform", "translate(0," + ysecond(0) + ")")
    .call(d3.axisBottom(xsecond).ticks(20, "s").tickSize(-heightsecondline, 0, 0)
            .tickFormat(""));

secondg.append("g")
    .attr("class", "axis axis--y")
    .call(d3.axisLeft(ysecond) .tickSize(-widthsecondline, 0, 0));

secondg.append("line")
	.style("stroke-dasharray", ("10,3")) // make the stroke dashed
    .style("stroke", "red") 
    .attr("x1",0)
    .attr("x2",widthsecondline)
    .attr("y1",30)
    .attr("y2",30);  

var path = secondg.append("g")
  .attr("clip-path", "url(#clip)")
  .append("path")
  .datum(datasecond)
  .attr("class", "line")
  .transition()
  .duration(2000)
  .ease(d3.easeLinear)
  .on("start", ticksecond);



function ticksecond() {

  // Push a new data point onto the back.
  generateddata = datasecond.push(randomsecond());
  console.log(generateddata);
  // Redraw the line.
  d3.select(this)
      .attr("d", secondline)
      .attr("transform", null);

  // Slide it to the left.
  d3.active(this)
    .attr("transform", "translate(" + xsecond(-1) + ",0)")
    .transition()
    .on("start", ticksecond);

  // Pop the old data point off the front.
  datasecond.shift();

}

var nthird = 60,
    randomthird = d3.randomNormal(0, .45),
    datathird = d3.range(nthird).map(randomthird);


var svgthirdline = d3.select("#firstgraph"),
    margin3 = {top: 460, right: 20, bottom: 440, left: 40},
    widththirdline = +svgthirdline.attr("width") - margin3.left - margin3.right,
    heightthirdline = +svgthirdline.attr("height") - margin3.top - margin3.bottom,
    thirdgraphg = svgthirdline.append("g").attr("transform", "translate(" + margin3.left + "," + margin3.top + ")");

var xthird = d3.scaleLinear()
    .domain([0, nthird - 1])
    .range([0, widththirdline]);

var ythird = d3.scaleLinear()
    .domain([0, 1])
    .range([heightthirdline, 0]);

var thirdline = d3.line()
    .x(function(d, i) { return xthird(i); })
    .y(function(d, i) { return ythird(d); });

thirdgraphg.append("rect")
	.attr("width",widththirdline)
	.attr("height",30)
	.attr("x",0)
	.attr("y",0)
	.attr("fill","#661616")
	.attr("opacity",0.4);

thirdgraphg.append("rect")
	.attr("width",widththirdline)
	.attr("height",heightthirdline -30)
	.attr("x",0)
	.attr("y",30)
	.attr("fill","#1E4B31")
	.attr("opacity",0.4).on("mouseover", mouseover)
    .on("mousemove", mousemove)
    .on("mouseout", mouseout);

var div = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("display", "none");

function mouseover() {
  div.style("display", "inline");
  d3.selectAll("#tooltipline").remove();
    d3.selectAll("#toolcircle").remove();
}

function mousemove() {
  div
      .text(d3.event.pageY)
      .style("left", (d3.event.pageX - 34) + "px")
      .style("top", (d3.event.pageY - 12) + "px");
       d3.selectAll("#tooltipline").remove();
       d3.selectAll("#toolcircle").remove();

d3.select("#firstgraph").append("line").attr("x1",function(){return d3.event.pageX -34;})
   											.attr("x2",function(){return d3.event.pageX - 34;})
   											.attr("y1",10)
   											.attr("y2", 885)
   											.attr("stroke","#EA7A1E")
   											.attr("stroke-width",3)
   											.attr("id","tooltipline");

d3.select("#firstgraph").append("circle").attr("cx",function(){return d3.event.pageX -34;})
											.attr("cy",5)
											.attr("r",5)
											.attr("fill","#EA7A1E")
											.attr("id","toolcircle");
   
}

function mouseout() {
  div.style("display", "none");
  d3.selectAll("#tooltipline").remove();
  d3.selectAll("#toolcircle").remove();
}




thirdgraphg.append("defs").append("clipPath")
    .attr("id", "clip")
  	.append("rect")
  	.attr("width", widththirdline)
    .attr("height", heightthirdline);
   

thirdgraphg.append("g")
    .attr("class", "axis axis--x")
    .attr("fill","black")
   	.attr("transform", "translate(0," + ysecond(0) + ")")
    .call(d3.axisBottom(xsecond).ticks(20, "s").tickSize(-heightthirdline, 0, 0)
            .tickFormat(""));

thirdgraphg.append("g")
    .attr("class", "axis axis--y")
    .call(d3.axisLeft(ythird).tickSize(-widththirdline, 0, 0));

thirdgraphg.append("line")
	.style("stroke-dasharray", ("10,3")) // make the stroke dashed
    .style("stroke", "red") 
    .attr("x1",0)
    .attr("x2",widththirdline)
    .attr("y1",30)
    .attr("y2",30);  

var path = thirdgraphg.append("g")
  .attr("clip-path", "url(#clip)")
  .append("path")
  .datum(datathird)
  .attr("class", "line")
  .transition()
  .duration(2000)
  .ease(d3.easeLinear)
  .on("start", tickthird);



console.log(datathird);

function tickthird() {

  // Push a new data point onto the back.
  generateddata = datathird.push(randomthird());
  console.log(generateddata);
  // Redraw the line.
  d3.select(this)
      .attr("d", thirdline)
      .attr("transform", null);

  // Slide it to the left.
  d3.active(this)
    .attr("transform", "translate(" + xthird(-1) + ",0)")
    .transition()
    .on("start", tickthird);

  // Pop the old data point off the front.
  datathird.shift();

}   
var nfourth = 60,
    randomfourth = d3.randomNormal(0, .45),
    datafourth = d3.range(nfourth).map(randomfourth);


var svgfourthline = d3.select("#firstgraph"),
    margin4 = {top: 680, right: 20, bottom: 220, left: 40},
    widthfourthline = +svgfourthline.attr("width") - margin4.left - margin4.right,
    heightfourthline = +svgfourthline.attr("height") - margin4.top - margin4.bottom,
    fourthg = svgfourthline.append("g").attr("transform", "translate(" + margin4.left + "," + margin4.top + ")");

var xfourth = d3.scaleLinear()
    .domain([0, nfourth - 1])
    .range([0, widthfourthline]);

var yfourth = d3.scaleLinear()
    .domain([0, 1])
    .range([heightfourthline, 0]);




var fourthline = d3.line()
    .x(function(d, i) { return xfourth(i); })
    .y(function(d, i) { return yfourth(d); });

fourthg.append("rect")
	.attr("width",widthfourthline)
	.attr("height",30)
	.attr("x",0)
	.attr("y",0)
	.attr("fill","#661616")
	.attr("opacity",0.4);

fourthg.append("rect")
	.attr("width",widthfourthline)
	.attr("height",heightfourthline -30)
	.attr("x",0)
	.attr("y",30)
	.attr("fill","#1E4B31")
	.attr("opacity",0.4).on("mouseover", mouseover)
    .on("mousemove", mousemove)
    .on("mouseout", mouseout);

var div = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("display", "none");

function mouseover() {
  div.style("display", "inline");
  d3.selectAll("#tooltipline").remove();
  d3.selectAll("#toolcircle").remove();
}

function mousemove() {
  div
      .text(d3.event.pageY)
      .style("left", (d3.event.pageX - 34) + "px")
      .style("top", (d3.event.pageY - 12) + "px");
       d3.selectAll("#tooltipline").remove();
       d3.selectAll("#toolcircle").remove();

d3.select("#firstgraph").append("line").attr("x1",function(){return d3.event.pageX -34;})
   											.attr("x2",function(){return d3.event.pageX - 34;})
   											.attr("y1",10)
   											.attr("y2", 885)
   											.attr("stroke","#EA7A1E")
   											.attr("stroke-width",3)
   											.attr("id","tooltipline");

d3.select("#firstgraph").append("circle").attr("cx",function(){return d3.event.pageX -34;})
											.attr("cy",5)
											.attr("r",5)
											.attr("fill","#EA7A1E")
											.attr("id","toolcircle");
   
}

function mouseout() {
  div.style("display", "none");
  d3.selectAll("#tooltipline").remove();
  d3.selectAll("#toolcircle").remove();
}


fourthg.append("defs").append("clipPath")
    .attr("id", "clip")
  	.append("rect")
  	.attr("width", widthfourthline)
    .attr("height", heightfourthline);
   
/*svgfourthline.append("rect")
		.attr("class","zoom")
		.attr("width",widthfourthline)
		.attr("height",heightfourthline)
		.attr("transform","translate("+margin4.left+","+margin4.top+")")
		//.call(zoom);*/

fourthg.append("g")
    .attr("class", "axis axis--x")
    .attr("fill","black")
   	.attr("transform", "translate(0," + ysecond(0) + ")")
    .call(d3.axisBottom(xfourth).ticks(20, "s").tickSize(-heightfourthline, 0, 0)
            .tickFormat(""));

fourthg.append("g")
    .attr("class", "axis axis--y")
    .call(d3.axisLeft(yfourth).tickSize(-widthfourthline, 0, 0));

fourthg.append("line")
	.style("stroke-dasharray", ("10,3")) // make the stroke dashed
    .style("stroke", "red") 
    .attr("x1",0)
    .attr("x2",widthfourthline)
    .attr("y1",30)
    .attr("y2",30);  

var path = fourthg.append("g")
  .attr("clip-path", "url(#clip)")
  .append("path")
  .datum(datafourth)
  .attr("class", "line")
  .transition()
  .duration(2000)
  .ease(d3.easeLinear)
  .on("start", tickfourth);



console.log(datafourth);


function tickfourth() {

  // Push a new data point onto the back.
  generateddata = datafourth.push(randomfourth());
  console.log(generateddata);
  // Redraw the line.
  d3.select(this)
      .attr("d", fourthline)
      .attr("transform", null);

  // Slide it to the left.
  d3.active(this)
    .attr("transform", "translate(" + xfourth(-1) + ",0)")
    .transition()
    .on("start", tickfourth);

  // Pop the old data point off the front.
  datafourth.shift();

}   
var databrush = d3.range(800).map(Math.random);

var svgbrush = d3.select("#firstgraph"),
    marginbrush = {top: 900, right: 50, bottom: 160, left: 50},
    widthbrush = +svgbrush.attr("width") - marginbrush.left - marginbrush.right,
    heightbrush = +svgbrush.attr("height") - marginbrush.top - marginbrush.bottom,
    g = svgbrush.append("g").attr("transform", "translate(" + marginbrush.left + "," + marginbrush.top + ")");

var xbrush = d3.scaleLinear().domain([0, nfourth - 1]).range([0, widthbrush]),
    ybrush = d3.scaleLinear().domain([0, 1]).range([heightbrush,0]);

var brush = d3.brushX()
    .extent([[0, 0], [widthbrush, heightbrush]])
    .on("start brush end", brushmoved);

g.append("g")
    .attr("class", "axis axis--x")
    .attr("transform", "translate(0," + heightbrush + ")")
    .call(d3.axisBottom(xbrush));

 var zoom = d3.zoom().scaleExtent([1, Infinity])
			 .translateExtent([[0,0],[widthbrush, heightbrush]])
			 .extent([[0,0],[widthbrush, heightbrush]])
			 .on("zoom",zoomed); 

var gBrush = g.append("g")
    .attr("class", "brush")
    .call(brush);

var handle = gBrush.selectAll(".handle--custom")
  .data([{type: "w"}, {type: "e"}])
  .enter().append("path")
    .attr("class", "handle--custom")
    .attr("fill", "#666")
    .attr("fill-opacity", 0.8)
    .attr("stroke", "#000")
    .attr("stroke-width", 1.5)
    .attr("cursor", "ew-resize")
    .attr("d", d3.arc()
        .innerRadius(0)
        .outerRadius(heightbrush / 2)
        .startAngle(0)
        .endAngle(function(d, i) { return i ? Math.PI : -Math.PI; }));
//
gBrush.call(brush.move, xbrush.range());


function brushmoved() {
  var s = d3.event.selection;
  if (s == null) {
    handle.attr("display", "none");
 //   circle.classed("active", false);
  } else {
    var sx = s.map(xbrush.invert);
 //   circle.classed("active", function(d) { return sx[0] <= d && d <= sx[1]; });

	  handle.attr("display", null).attr("transform", function(d, i) { return "translate(" + s[i] + "," + heightbrush / 2 + ")"; });
	  if (d3.event.sourceEvent && d3.event.sourceEvent.type === "zoom") return; // ignore brush-by-zoom
	  var s = d3.event.selection;
	  xfourth.domain(s.map(xbrush.invert));
	  xthird.domain(s.map(xbrush.invert));
	  xsecond.domain(s.map(xbrush.invert));
	  xfirst.domain(s.map(xbrush.invert));

	  fourthg.select(".line").attr("d", fourthline);
	  fourthg.select(".axis--x").call(d3.axisBottom(xfourth).ticks(20, "s").tickSize(-heightfourthline, 0, 0)
			  .tickFormat(""));

	  thirdgraphg.select(".line").attr("d", thirdline);
	  thirdgraphg.select(".axis--x").call(d3.axisBottom(xthird).ticks(20, "s").tickSize(-heightthirdline, 0, 0)
			  .tickFormat(""));

	  secondg.select(".line").attr("d", secondline);
	  secondg.select(".axis--x").call(d3.axisBottom(xsecond).ticks(20, "s").tickSize(-heightsecondline, 0, 0)
			  .tickFormat(""));

	  firstg.select(".line").attr("d", firstline);
	  firstg.select(".axis--x").call(d3.axisBottom(xfirst).ticks(20, "s").tickSize(-heightfirstline, 0, 0)
			  .tickFormat(""));


	 fourthg.select(".zoom").call(zoom.transform, d3.zoomIdentity
			  .scale(widthfourthline / (s[1] - s[0]))
			  .translate(-s[0], 0));
	  thirdgraphg.select(".zoom").call(zoom.transform, d3.zoomIdentity
			  .scale(widththirdline / (s[1] - s[0]))
			  .translate(-s[0], 0));
	  secondg.select(".zoom").call(zoom.transform, d3.zoomIdentity
			  .scale(widthsecondline / (s[1] - s[0]))
			  .translate(-s[0], 0));
	  firstg.select(".zoom").call(zoom.transform, d3.zoomIdentity
			  .scale(widthfirstline / (s[1] - s[0]))
			  .translate(-s[0], 0)); 



  }
}

	function zoomed() {
		 if (d3.event.sourceEvent && d3.event.sourceEvent.type === "brush") return; // ignore zoom-by-brush
		 var t = d3.event.transform;
		 xfourth.domain(t.rescaleX(xbrush).domain());
		 xthird.domain(t.rescaleX(xbrush).domain());
		 xsecond.domain(t.rescaleX(xbrush).domain());
		 xfirst.domain(t.rescaleX(xbrush).domain());

		 thirdgraphg.select(".line").attr("d", thirdline);
		 thirdgraphg.select(".axis--x").call(d3.axisBottom(xthird).ticks(20, "s").tickSize(-heightthirdline, 0, 0)
				 .tickFormat(""));

		 fourthg.select(".line").attr("d", fourthline);
		 fourthg.select(".axis--x").call(d3.axisBottom(xfourth).ticks(20, "s").tickSize(-heightfourthline, 0, 0)
				 .tickFormat(""));
		 secondg.select(".line").attr("d", secondline);
		 secondg.select(".axis--x").call(d3.axisBottom(xsecond).ticks(20, "s").tickSize(-heightsecondline, 0, 0)
				 .tickFormat(""));

		 firstg.select(".line").attr("d", firstline);
		 firstg.select(".axis--x").call(d3.axisBottom(xfirst).ticks(20, "s").tickSize(-heightfirstline, 0, 0)
				 .tickFormat(""));

		 gBrush.call(brush.move, xbrush.range().map(t.invertX, t));
	 }


d3.select("body").append("svg").attr("id","currentreadings").attr("width",width/6.6).attr("height",1100);

var medsboxes = d3.select("#currentreadings").append("rect")
					.attr("width", width/11)
					.attr("height",height/17)
					.attr("x", width/30)
					.attr("y", 70)
					.attr("stroke", "#3D3737")
					.attr("stroke-width",2)
				//	.attr("class","current")
					.attr("fill","#4F867F");

d3.select("#currentreadings").append("text")
								.text("56")
								.attr("fill","white")
								.attr("font-size",width/23)
								.attr("x",width/20)
								.attr("y", 65)
								.attr("id","PAP")
								.attr("font-weight","bold");

d3.select("#currentreadings").append("text")
								.text("PAP")
								.attr("fill","white")
								.attr("font-size",width/40)
								.attr("x",width/21)
								.attr("y",110);
																

var inter = setInterval(function() {
                updateData();
        }, 5000); 

function getRandomInt(min, max){
	return Math.round(Math.random() * (max - min)) + min;
}
 function updateData(){
 		
			var newNumber = getRandomInt(50,90);
			d3.select("#currentreadings").selectAll("#PAP").remove();
			d3.select("#currentreadings").append("text").text(newNumber)
			.attr("fill", function(){if(newNumber <70) return 'white'; else return '#EA7A1E';})
			.attr("font-size",width/23)
			.attr("x",width/20)
			.attr("y",65)
			.attr("id","PAP")
			.attr("font-weight","bold");
			
	
}
var medsboxes = d3.select("#currentreadings").append("rect")
					.attr("width", width/11)
					.attr("height",height/17)
					.attr("x", width/30)
					.attr("y", 290)
					.attr("stroke", "#3D3737")
					.attr("stroke-width",2)
					.attr("fill","#4F867F");

d3.select("#currentreadings").append("text")
								.text("67")
								.attr("fill","white")
								.attr("font-size",width/23)
								.attr("x",width/20)
								.attr("y", 285)
								.attr("id","SVO2")
								.attr("font-weight","bold");

d3.select("#currentreadings").append("text")
								.text("SVO2")
								.attr("fill","white")
								.attr("font-size",width/40)
								.attr("x",width/21)
								.attr("y", 330);
																

var inter = setInterval(function() {
                updateDataSVO2();
        }, 3000); 
 function updateDataSVO2(){
 		
			var newNumberSVO2 = getRandomInt(60,80);;
			
			d3.select("#currentreadings").selectAll("#SVO2").remove();
			
			d3.select("#currentreadings").append("text")
								.text(newNumberSVO2)
								.attr("fill",function(){if(newNumberSVO2>70) return '#EA7A1E'; else return 'white';})
								.attr("font-size",width/23)
								.attr("x",width/20)
								.attr("y", 285)
								.attr("id","SVO2")
								.attr("font-weight","bold");
			
	
}
var medsboxes = d3.select("#currentreadings").append("rect")
					.attr("width", width/11)
					.attr("height",height/17)
					.attr("x", width/30)
					.attr("y", 510)
					.attr("stroke", "#3D3737")
					.attr("stroke-width",2)
				//	.attr("class","current")
					.attr("fill","#4F867F");

d3.select("#currentreadings").append("text")
								.text("77")
								.attr("fill","white")
								.attr("font-size",width/23)
								.attr("x",width/20)
								.attr("y", 505)
								.attr("id","HR")
								.attr("font-weight","bold");

d3.select("#currentreadings").append("text")
								.text("HR")
								.attr("fill","white")
								.attr("font-size",width/40)
								.attr("x",width/21)
								.attr("y", 550);
																

var inter = setInterval(function() {
                updateDataHR();
        }, 3000); 
 function updateDataHR(){
 		
			var newNumberHR = getRandomInt(20,70);
			d3.select("#currentreadings").selectAll("#HR").remove();
			d3.select("#currentreadings").append("text").text(newNumberHR)
			.attr("fill", function(){if(newNumberHR <50) return 'white'; else return '#EA7A1E';})
			.attr("font-size",width/23)
			.attr("x",width/20)
			.attr("y",505)
			.attr("id","HR")
			.attr("font-weight","bold");
			
	
}

var medsboxes = d3.select("#currentreadings").append("rect")
					.attr("width", width/11)
					.attr("height",height/17)
					.attr("x", width/30)
					.attr("y", 730)
					.attr("stroke", "#3D3737")
					.attr("stroke-width",2)
				//	.attr("class","current")
					.attr("fill","#4F867F");


d3.select("#currentreadings").append("text")
								.text("34")
								.attr("fill","white")
								.attr("font-size",width/23)
								.attr("font-weight",'bold')
								.attr("x",width/20)
								.attr("y", 725)
								.attr("id","BPM");

d3.select("#currentreadings").append("text")
								.text("BPM")
								.attr("fill","white")
								.attr("font-size",width/40)
								.attr("x",width/21)
								.attr("y", 770);
																

var interBPM = setInterval(function() {
                updateDataBPM();
        }, 3000); 
 function updateDataBPM(){
 		
			var newNumberBPM = getRandomInt(20,80);
			d3.select("#currentreadings").selectAll("#BPM").remove();
			d3.select("#currentreadings").append("text").text(newNumberBPM).attr("fill", function(){if(newNumberBPM <60) return 'white'; else return '#EA7A1E';})
			.attr("font-size",width/23).attr("x",width/20).attr("y",725)
			.attr("id","BPM")
			.attr("font-weight","bold");
			
	
}
})



</script>

</body>
</html>